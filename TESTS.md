# โ ุงุฎุชุจุงุฑุงุช ุงููุจูู - B36 v32 RBAC

ูุฐุง ุงูููู ูุญุชูู ุนูู ุงุฎุชุจุงุฑุงุช ุงููุจูู ุงููุงููุฉ

---

## ๐ฏ Test Cases - Acceptance Criteria

### Test Suite 1: RBAC & Permissions

#### TC-01: ุตูุงุญูุงุช ุงูุฃุฏูุงุฑ
**ุงููุฏู:** ุงูุชุญูู ูู ุฃู ูู ุฏูุฑ ูุฑู ููุท ูุง ููุณูุญ ูู

**ุงูุฎุทูุงุช:**
1. ุณุฌู ุฏุฎูู ุจู `external_regular` (pass: 1234)
2. ุชุญูู: ูุฑู Dashboard ููุท
3. ุชุญูู: ูุง ูุฑู "ุฅูุดุงุก ุทูุจ"
4. ุณุฌู ุฎุฑูุฌ

5. ุณุฌู ุฏุฎูู ุจู `external_supervisor` (pass: 1234)
6. ุชุญูู: ูุฑู "ุฅูุดุงุก ุทูุจ"
7. ุชุญูู: ูุฑู ูุงุฆูุฉ ุทูุจุงุชู ููุท

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ External Regular ูุฑู Dashboard ููุท
- โ External Supervisor ูุฑู ุทูุจุงุชู + ููุฏุฑ ููุดุฆ ุทูุจุงุช

---

#### TC-02: ููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ
**ุงููุฏู:** ุงูุชุญูู ูู ุญูุงูุฉ ุงูุตูุงุญูุงุช

**ุงูุฎุทูุงุช:**
1. ุณุฌู ุฏุฎูู ุจู `internal_regular_1` (pass: 1234)
2. ุญุงูู ูุจูู ุทูุจ ููุงุนุฉ ุบูุฑ ูุนููุฉ ูู
3. ุชุญูู: ูุธูุฑ ุฎุทุฃ "ููููู ูุจูู ุทูุจุงุช ูุงุนุชู ููุท"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ
- โ ูุง ูุชู ูุจูู ุงูุทูุจ

---

### Test Suite 2: State Machine

#### TC-03: ุงูุงูุชูุงู ุงูุตุญูุญ
**ุงููุฏู:** ุงูุชุญูู ูู State Machine

**ุงูุฎุทูุงุช:**
1. ุฃูุดุฆ ุทูุจ โ Status: Pending โ
2. ุงูุจู ุงูุทูุจ โ Status: Accepted โ
3. ุตุงุฏู ุนูู ุงููุตูู โ Status: Arrived โ
4. ุฃุบูู ุงูุทูุจ โ Status: Closed โ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูู ุงูุชูุงู ููุฌุญ ุจุฏูู ุฃุฎุทุงุก

---

#### TC-04: ููุน ุงูุงูุชูุงู ุบูุฑ ุงูุตุญูุญ
**ุงููุฏู:** ููุน ุงูุงูุชูุงูุงุช ุงูุฎุงุทุฆุฉ

**ุงูุฎุทูุงุช:**
1. ุฃูุดุฆ ุทูุจ (Status: Pending)
2. ุญุงูู ูุตุงุฏูุฉ ุงููุตูู ูุจุงุดุฑุฉ (ุจุฏูู ูุจูู)
3. ุชุญูู: ุฎุทุฃ "ูุฌุจ ุฃู ูููู ููุจููุงู ุฃููุงู"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุณุงูุฉ ุฎุทุฃ
- โ Status ูู ูุชุบูุฑ

---

### Test Suite 3: Confirmation System

#### TC-05: ูุตุงุฏูุฉ ูุทุงุจูุฉ (Happy Path)
**ุงููุฏู:** ูุตุงุฏูุฉ ุจุฏูู ูุฑู

**ุงูุฎุทูุงุช:**
1. External Supervisor: ุฃูุดุฆ ุทูุจ ูู 50 ูุฑุดุญ โ ูุงุนุฉ 1
2. Internal Regular (ูุงุนุฉ 1): ุงูุจู ุงูุทูุจ
3. ุงุถุบุท "ูุตุงุฏูุฉ ุงููุตูู"
4. ุฃุฏุฎู: actualCount = 50
5. ุชุญูู: ุงููุฑู = 0 (ูุทุงุจู)
6. ุชุญูู: ุงูุชุนููู ุงุฎุชูุงุฑู
7. ุงุถุบุท "ุชุฃููุฏ ุงููุตุงุฏูุฉ"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ outdoor_queue -= 50
- โ ูุงุนุฉ 1 += 50
- โ Status = Arrived
- โ Confirmation ุชู ุญูุธู
- โ Audit Log ูุญุชูู ุนูู ุงูุนูููุฉ

---

#### TC-06: ูุตุงุฏูุฉ ูุงูุตุฉ
**ุงููุฏู:** ูุตุงุฏูุฉ ูุน ููุต ูู ุงูุนุฏุฏ

**ุงูุฎุทูุงุช:**
1. ุฃูุดุฆ ุทูุจ ูู 50 ูุฑุดุญ
2. ุงูุจู
3. ูุตุงุฏูุฉ: actualCount = 48
4. ุชุญูู: ุงููุฑู = -2 (ูุงูุต 2)
5. ุชุญูู: ุงูุชุนููู **ุฅูุฒุงูู**
6. ุฃุฏุฎู ุชุนููู: "ุดุฎุตุงู ูู ูุตูุง"
7. ุงุถุบุท "ุชุฃููุฏ"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ outdoor_queue -= 48 (ุงููุนูู)
- โ ูุงุนุฉ += 48
- โ missing_count += 2
- โ Confirmation ูุญุชูู ุนูู:
  - requestedCount: 50
  - actualCount: 48
  - difference: -2
  - differenceType: "ูุงูุต"
  - comment: "ุดุฎุตุงู ูู ูุตูุง"

---

#### TC-07: ูุตุงุฏูุฉ ุฒูุงุฏุฉ
**ุงููุฏู:** ูุตุงุฏูุฉ ูุน ุฒูุงุฏุฉ ูู ุงูุนุฏุฏ

**ุงูุฎุทูุงุช:**
1. ุทูุจ ูู 50
2. ูุตุงุฏูุฉ: actualCount = 52
3. ุชุญูู: ุงููุฑู = +2 (ุฒูุงุฏุฉ 2)
4. ุฃุฏุฎู ุชุนููู
5. ุงุถุบุท "ุชุฃููุฏ"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ outdoor_queue -= 52
- โ ูุงุนุฉ += 52
- โ difference: +2
- โ differenceType: "ุฒูุงุฏุฉ"

---

#### TC-08: ุงูุชุนููู ุงูุฅูุฒุงูู
**ุงููุฏู:** ุงูุชุญูู ูู ุฅูุฒุงููุฉ ุงูุชุนููู ุนูุฏ ูุฌูุฏ ูุฑู

**ุงูุฎุทูุงุช:**
1. ูุตุงุฏูุฉ: actualCount = 48 (ูุฑู -2)
2. **ูุง** ุชุฏุฎู ุชุนููู
3. ุงุถุบุท "ุชุฃููุฏ"
4. ุชุญูู: ุฎุทุฃ "ูุฌุจ ุฅุฏุฎุงู ุชุนููู ุนูุฏ ูุฌูุฏ ูุฑู"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ
- โ ูุง ูุชู ุชุฃููุฏ ุงููุตุงุฏูุฉ

---

### Test Suite 4: Path Organizer Workflow

#### TC-09: ููู ุนุจุฑ ููุธู ุงููุณุงุฑ (Complete Flow)
**ุงููุฏู:** ุงุฎุชุจุงุฑ Waiting โ Interview ุจุงููุงูู

**ุงูุฎุทูุงุช:**
1. **Internal Supervisor**: ุณุฌู ุฏุฎูู
2. ุงุฐูุจ ูู "ุทูุจุงุช ุงูููู"
3. "ุฅูุดุงุก ุทูุจ Waiting โ Interview"
4. ุงุฎุชุฑ: ูุงุนุฉ ุงูุชุธุงุฑ 1 โ ูุงุนุฉ ููุงุจูุงุช 1
5. ุงูุนุฏุฏ: 30
6. **ุงุฎุชุฑ ููุธู ุงููุณุงุฑ** ูู ุงููุงุฆูุฉ (internal_regular_2)
7. ุฃูุดุฆ ุงูุทูุจ โ Status: Pending

8. **ููุธู ุงููุณุงุฑ** (internal_regular_2): ุณุฌู ุฏุฎูู
9. ุงุฐูุจ ูู "ุงูุทูุจุงุช ุงููุนููุฉ ูู"
10. ุงุถุบุท "ุจุฏุก ุงูููู"
11. ุชุฃููุฏ โ Status: InTransit
12. ุชุญูู: ูุงุนุฉ ุงูุชุธุงุฑ 1 -= 30 (ููุฑุงู)

13. **ูุณุคูู ูุงุนุฉ ุงูููุงุจูุงุช**: ุณุฌู ุฏุฎูู
14. ูุฑู ุฅุดุนุงุฑ ุจูุตูู ุทูุจ
15. ุงุถุบุท "ูุตุงุฏูุฉ ุงููุตูู"
16. actualCount: 30
17. ุงุถุบุท "ุชุฃููุฏ" โ Status: Arrived
18. ุชุญูู: ูุงุนุฉ ููุงุจูุงุช 1 += 30

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูู ุงูุฎุทูุงุช ุชุนูู ุจุณูุงุณุฉ
- โ ูุงุนุฉ ุงูุชุธุงุฑ -= 30
- โ ูุงุนุฉ ููุงุจูุงุช += 30
- โ Audit Log ูุญุชูู ุนูู ูู ุงูุฎุทูุงุช

---

#### TC-10: ููุน ุบูุฑ ููุธู ุงููุณุงุฑ
**ุงููุฏู:** ุงูุชุญูู ูู ูููุฏ ููุธู ุงููุณุงุฑ

**ุงูุฎุทูุงุช:**
1. ุณุฌู ุฏุฎูู ุจู `internal_regular_1` (ููุณ ููุธู ูุณุงุฑ)
2. ุญุงูู "ุจุฏุก ุงูููู" ุนูู ุทูุจ
3. ุชุญูู: ุฎุทุฃ "ูุฐู ุงูุนูููุฉ ูููุธู ุงููุณุงุฑ ููุท"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ
- โ ูุง ูุชู ุชูููุฐ ุงูููู

---

### Test Suite 5: Edge Cases

#### TC-11: ุฑูุถ ุทูุจ
**ุงููุฏู:** ุงุฎุชุจุงุฑ ุฑูุถ ุงูุทูุจุงุช

**ุงูุฎุทูุงุช:**
1. ุฃูุดุฆ ุทูุจ
2. ุงุถุบุท "ุฑูุถ"
3. **ูุง** ุชุฏุฎู ุณุจุจ
4. ุชุญูู: ุฎุทุฃ "ูุฌุจ ุฅุฏุฎุงู ุณุจุจ ุงูุฑูุถ"
5. ุฃุฏุฎู ุณุจุจ: "ุงููุงุนุฉ ูููุฆุฉ"
6. ุงุถุบุท "ุฑูุถ"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ Status: Rejected
- โ rejectionReason: "ุงููุงุนุฉ ูููุฆุฉ"
- โ ูุง ุชุบููุฑ ูู ุงูุฃุนุฏุงุฏ
- โ External Supervisor ูุฑู ุงูุฑูุถ

---

#### TC-12: ุชุฌุงูุฒ ุงูุณุนุฉ
**ุงููุฏู:** ููุน ุชุฌุงูุฒ ุณุนุฉ ุงููุงุนุฉ

**ุงูุฎุทูุงุช:**
1. ูุงุนุฉ 1: capacity = 50, current = 45
2. ุญุงูู ุฅูุดุงุก ุทูุจ ูู 10 ูุฑุดุญูู
3. ุชุญูู: ุชุญุฐูุฑ "ุงูุณุนุฉ ุงููุชุงุญุฉ: 5 ููุท"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุณุงูุฉ ุชุญุฐูุฑ
- โ ูุง ูุชู ุฅูุดุงุก ุงูุทูุจ

---

#### TC-13: ุทูุจ ููุงุนุฉ ุบูุฑ ูุดุทุฉ
**ุงููุฏู:** ููุน ุงูุทูุจุงุช ูููุงุนุงุช ุงููุนุทูุฉ

**ุงูุฎุทูุงุช:**
1. ูุงุนุฉ 1: active = false
2. ุญุงูู ุฅูุดุงุก ุทูุจ ููุงุนุฉ 1
3. ุชุญูู: ุฎุทุฃ "ุงููุงุนุฉ ุบูุฑ ูุดุทุฉ"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุณุงูุฉ ุฎุทุฃ
- โ ูุง ูุชู ุฅูุดุงุก ุงูุทูุจ

---

### Test Suite 6: KPIs & Analytics

#### TC-14: ุชุญุฏูุซ KPIs ุงูููุฑู
**ุงููุฏู:** ุงูุชุญูู ูู ุงูุชุญุฏูุซุงุช ุงูููุฑูุฉ

**ุงูุฎุทูุงุช:**
1. ุงูุชุญ Dashboard ูู ุชุจููุจูู
2. ูู ุงูุชุจููุจ 1: ููุฐ ุนูููุฉ ููู
3. ุชุญูู ูู ุงูุชุจููุจ 2: KPIs ุชุญุฏุซุช ููุฑุงู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุชุญุฏูุซุงุช ุงูููุฑูุฉ ุชุนูู
- โ ูุง ุญุงุฌุฉ ูู Refresh

---

#### TC-15: ุนุฑุถ KPIs ุญุณุจ ุงูุฏูุฑ
**ุงููุฏู:** ูู ุฏูุฑ ูุฑู KPIs ููุงุณุจุฉ

**ุงูุฎุทูุงุช:**
1. External Regular: ูุฑู "ุฎุงุฑุฌุงู" ููุท โ
2. Internal Regular: ูุฑู "ุงูุชุธุงุฑ + ููุงุจูุงุช" โ
3. Admin: ูุฑู ุงูู 5 KPIs ูุงููุฉ โ
4. Viewer: ูุฑู ุงูู 5 KPIs ูุงููุฉ โ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูู ุฏูุฑ ูุฑู ุงูููุงุณุจ ูู

---

### Test Suite 7: Audit Log

#### TC-16: ุชุณุฌูู ุงูุนูููุงุช
**ุงููุฏู:** ุงูุชุญูู ูู Audit Log

**ุงูุฎุทูุงุช:**
1. ุณุฌู ุฏุฎูู ุจู Admin
2. ุงุฐูุจ ูู "ุณุฌู ุงูุนูููุงุช"
3. ููุฐ: ุฅูุดุงุก ุทูุจ
4. ุชุญูู: ุงูุณุฌู ูุญุชูู ุนูู:
   - userId: admin
   - action: CREATE_TRANSFER_REQUEST
   - details: ูุต ูุงุถุญ
   - before: null
   - after: {ุงูุทูุจ ุงูุฌุฏูุฏ}
   - timestamp: ุงูููุช ุงูุญุงูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูู ุนูููุฉ ูุณุฌูุฉ
- โ ุงูุจูุงูุงุช ูุงููุฉ ูุฏูููุฉ

---

### Test Suite 8: Users Management

#### TC-17: ุฅุถุงูุฉ ููุธู ูุณุงุฑ
**ุงููุฏู:** ุชุนููู ููุธู ูุณุงุฑ ุฌุฏูุฏ

**ุงูุฎุทูุงุช:**
1. Admin: ุงุฐูุจ ูู "ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู"
2. "ุฅุถุงูุฉ ูุณุชุฎุฏู"
3. Username: path_org_3
4. Role: ููุฒุฑ ุงูููุธู ุงูุฏุงุฎูู ุนุงุฏู
5. Assigned Hall: ูุงุนุฉ ููุงุจูุงุช 1
6. **โ๏ธ ููุธู ูุณุงุฑ** (checkbox)
7. ุงุญูุธ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงููุณุชุฎุฏู ูููุดุฃ ูุน isPathOrganizer: true
- โ ูุธูุฑ ูู ูุงุฆูุฉ ููุธูู ุงููุณุงุฑ

---

### Test Suite 9: Profile Management

#### TC-18: ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
**ุงููุฏู:** ุงุฎุชุจุงุฑ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ

**ุงูุฎุทูุงุช:**
1. ุณุฌู ุฏุฎูู ุจุฃู ูุณุชุฎุฏู
2. ุงุฐูุจ ููููู ุงูุดุฎุตู
3. "ุชุบููุฑ ูููุฉ ุงููุฑูุฑ"
4. Current: 1234
5. New: 5678
6. ุงุญูุธ
7. ุณุฌู ุฎุฑูุฌ
8. ุณุฌู ุฏุฎูู ุจูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูุชู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
- โ ุชุณุฌูู ุงูุฏุฎูู ุจุงูุฌุฏูุฏุฉ ููุฌุญ
- โ Audit Log ูุณุฌู ุงูุนูููุฉ (ุจุฏูู ูููุงุช ุงููุฑูุฑ)

---

### Test Suite 10: System Reset

#### TC-19: ุชููุฆุฉ ุงููุธุงู
**ุงููุฏู:** ุงุฎุชุจุงุฑ ุฅูุดุงุก ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ

**ุงูุฎุทูุงุช:**
1. ุงุถุบุท "๐ง ุชููุฆุฉ ุงููุธุงู"
2. ุชุฃููุฏ
3. ุงูุชุธุฑ...
4. ุชุญูู:
   - 7 ูุณุชุฎุฏููู ุชู ุฅูุดุงุคูู โ
   - 4 ูุงุนุงุช ุชู ุฅูุดุงุคูุง โ
   - outdoor_queue = 50 โ
   - missing_count = 0 โ
   - served_count = 0 โ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ุฌุงูุฒุฉ
- โ ูููู ุชุณุฌูู ุงูุฏุฎูู ุจุฃู ุญุณุงุจ

---

## ๐ฏ Acceptance Criteria Summary

### Must Have (ุฅูุฒุงูู):
- โ 6 ุฃุฏูุงุฑ ุชุนูู ุจุดูู ุตุญูุญ
- โ State Machine ุชููุน ุงูุงูุชูุงูุงุช ุงูุฎุงุทุฆุฉ
- โ ูุธุงู ุงููุตุงุฏูุฉ ูุญุณุจ ุงููุฑู ุชููุงุฆูุงู
- โ ุงูุชุนููู ุฅูุฒุงูู ุนูุฏ ูุฌูุฏ ูุฑู
- โ missing_count ูุชุญุฏุซ ุจุดูู ุตุญูุญ
- โ ููุธู ุงููุณุงุฑ ูุณุชุทูุน ุจุฏุก ุงูููู
- โ RBAC ูููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ
- โ Audit Log ูุณุฌู ูู ุงูุนูููุงุช
- โ Real-time updates ุชุนูู

### Should Have (ูุฑุบูุจ):
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- โ Toast notifications ุฌูููุฉ
- โ Dark mode ูุนูู
- โ Mobile responsive
- โ Loading indicators

### Nice to Have (ุฅุถุงูู):
- โ๏ธ ุชุตุฏูุฑ Audit Log ุฅูู CSV
- โ๏ธ ููุชุฑุฉ ุงูุทูุจุงุช ุงููุชูุฏูุฉ
- โ๏ธ ุฅุญุตุงุฆูุงุช ูุชูุฏูุฉ
- โ๏ธ Firebase Rules ุนูู ูุณุชูู DB

---

## ๐ Test Results Template

```markdown
### Test Run: [ุงูุชุงุฑูุฎ]

| Test Case | Status | Notes |
|-----------|--------|-------|
| TC-01 | โ Pass | - |
| TC-02 | โ Pass | - |
| TC-03 | โ Pass | - |
| TC-04 | โ Fail | [ุงูุณุจุจ] |
| ... | | |

**Summary:**
- Passed: X/19
- Failed: Y/19
- Coverage: Z%
```

---

**B36 v32 - RBAC Complete Test Suite** โ

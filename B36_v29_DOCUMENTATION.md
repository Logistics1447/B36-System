# ๐ฏ B36 System v29 - RBAC Complete Documentation

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุฅุฏุงุฑุฉ ุชุฏูู ุงููุฑุดุญูู ูุน **RBAC ูุงูู** + **Workflow Management** + **Audit Trail**

---

## ๐ฅ ุงูุฃุฏูุงุฑ ุงูุณุจุนุฉ

### 1๏ธโฃ ูุดุฑู ุฎุงุฑุฌู (EXTERNAL_SUPERVISOR)
**ุงูุตูุงุญูุงุช:**
- โ ุฅุฏุงุฑุฉ ุนุฏุฏ ุงูุงูุชุธุงุฑ ุงูุฎุงุฑุฌู (ุฅุถุงูุฉ/ุฎุตู)
- โ ุนุฑุถ ุงูุนุฏุฏ ุงูููู ููููุชุธุฑูู ุฎุงุฑุฌุงู
- โ ุฅูุดุงุก ุทูุจุงุช ููู ูู ุฎุงุฑุฌ ุงููุจูู โ ูุงุนุงุช ุงูุงูุชุธุงุฑ
- โ ูุชุงุจุนุฉ ุญุงูุฉ ุงูุทูุจุงุช ุงูุชู ุฃูุดุฃูุง
- โ ุนุฑุถ ููุญุฉ ุงูุชุญูู

**ูุง ูุณุชุทูุน:**
- โ ุงููุตูู ููุงุนุงุช ุงูููุงุจูุงุช
- โ ูุจูู/ุฑูุถ ุงูุทูุจุงุช
- โ ุนุฑุถ ุณุฌู ุงูุนูููุงุช

### 2๏ธโฃ ููุธู ุฎุงุฑุฌู (EXTERNAL_REGULAR)
**ุงูุตูุงุญูุงุช:**
- โ ุฅุฏุฎุงู ุฃุนุฏุงุฏ ุงููุงุตููู ููุท
- โ ุนุฑุถ ููุญุฉ ุชุญูู ุจุณูุทุฉ

**ูุง ูุณุชุทูุน:**
- โ ุนุฑุถ ุงูุนุฏุฏ ุงูููู ููููุชุธุฑูู (ุณุฑู ูููุดุฑู ููุท)
- โ ุฅูุดุงุก ุทูุจุงุช
- โ ุฃู ุตูุงุญูุงุช ุฃุฎุฑู

### 3๏ธโฃ ูุดุฑู ุฏุงุฎูู (INTERNAL_SUPERVISOR)
**ุงูุตูุงุญูุงุช:**
- โ ุฅูุดุงุก ุทูุจุงุช ููู ูู ูุงุนุงุช ุงูุงูุชุธุงุฑ โ ูุงุนุงุช ุงูููุงุจูุงุช
- โ ุฅูุดุงุก ุทูุจุงุช ุฅุนุงุฏุฉ ุชูุฒูุน (ููุงุจูุงุช โ ููุงุจูุงุช)
- โ ูุจูู/ุฑูุถ ุฃู ุทูุจ (ุตูุงุญูุฉ ุชุฌุงูุฒูุฉ)
- โ ุงููุตุงุฏูุฉ ุนูู ุงููุตูู
- โ ุนุฑุถ ุฌููุน ุงููุงุนุงุช ูุงูุฅุญุตุงุฆูุงุช

**ูุง ูุณุชุทูุน:**
- โ ุฅุฏุงุฑุฉ ุงููุงุนุงุช ูุงููุณุชุฎุฏููู (ูููุฏูุฑ ููุท)
- โ ุนุฑุถ ุณุฌู ุงูุนูููุงุช ุงููุงูู

### 4๏ธโฃ ููุธู ุฏุงุฎูู (INTERNAL_REGULAR)
**ุงูุตูุงุญูุงุช:**
- โ ูุจูู/ุฑูุถ ุงูุทูุจุงุช ุงููุงุฑุฏุฉ ููุงุนุชู ููุท
- โ ุงููุตุงุฏูุฉ ุนูู ุงููุตูู ููุงุนุชู
- โ ุนุฑุถ ุจูุงูุงุช ูุงุนุชู ููุท

**ูุง ูุณุชุทูุน:**
- โ ุฅูุดุงุก ุทูุจุงุช ููู
- โ ุงููุตูู ููุงุนุงุช ุฃุฎุฑู
- โ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ุงููุงููุฉ

### 5๏ธโฃ ููุธู ูุณุงุฑ (PATH_ORGANIZER)
**ุงูุตูุงุญูุงุช:**
- โ ุงุณุชูุงู ุงูุทูุจุงุช ุงููุนููุฉ ูู
- โ ุจุฏุก ุงูุชูุตูู (ุชุบููุฑ ุงูุญุงูุฉ ูู InTransit)
- โ ุนุฑุถ ุทูุจุงุชู ููุท

**ูุง ูุณุชุทูุน:**
- โ ูุจูู/ุฑูุถ ุงูุทูุจุงุช
- โ ุงููุตุงุฏูุฉ ุนูู ุงููุตูู
- โ ุฅูุดุงุก ุทูุจุงุช

### 6๏ธโฃ ูุฏูุฑ ุนุงู (ADMIN)
**ุงูุตูุงุญูุงุช:**
- โ **ูู ุงูุตูุงุญูุงุช** ุจุฏูู ุงุณุชุซูุงุก
- โ ุฅุฏุงุฑุฉ ุงููุงุนุงุช (ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู)
- โ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุชุนููู ุงูุฃุฏูุงุฑ
- โ ุนุฑุถ ุณุฌู ุงูุนูููุงุช ุงููุงูู (Audit Log)
- โ ุงูุฅุญุตุงุฆูุงุช ุงููุชูุฏูุฉ

### 7๏ธโฃ ุนุงุฑุถ (VIEWER)
**ุงูุตูุงุญูุงุช:**
- โ ุนุฑุถ Dashboard ููุท (ููุฅุญุตุงุฆูุงุช)
- โ ูุง ููุฌุฏ ุฃู ูุตูู ููุตูุญุงุช ุงูุฃุฎุฑู

---

## ๐ ุงูุชุฏููุงุช (Workflows)

### Workflow 1: ุฎุงุฑุฌ ุงููุจูู โ ูุงุนุฉ ุงูุชุธุงุฑ

```
1. ููุธู_ุฎุงุฑุฌู (ุนุงุฏู)
   โโ ูุฏุฎู ุนุฏุฏ ุงููุงุตููู
   โโ ูุถุงู ููุนุฏุงุฏ outdoor_queue

2. ูุดุฑู_ุฎุงุฑุฌู
   โโ ูุดุงูุฏ outdoor_queue
   โโ ููุดุฆ ุทูุจ ููู X ุดุฎุต ููุงุนุฉ ุงูุชุธุงุฑ Y
   โโ ุงูุญุงูุฉ: Pending

3. ููุธู_ุฏุงุฎูู (ูุณุคูู ูุงุนุฉ ุงูุงูุชุธุงุฑ)
   โโ ูุณุชูู ุงูุทูุจ
   โโ ููุงูู ุฃู ูุฑูุถ
   โโ ุฅุฐุง ูุงูู: ุงูุญุงูุฉ โ Accepted

4. ููุธู_ูุณุงุฑ
   โโ ูุณุชูู ุงูุทูุจ ุงูููุจูู
   โโ ูุถุบุท "ุจุฏุฃุช ุงูุชูุตูู"
   โโ ุงูุญุงูุฉ โ InTransit

5. ููุธู_ุฏุงุฎูู (ููุณ ูุณุคูู ุงููุงุนุฉ)
   โโ ูุนุฏ ุงููุฑุดุญูู ุงููุงุตููู ูุนููุงู
   โโ ูุตุงุฏู ุนูู ุงูุนุฏุฏ:
   โ  โโ ุงููุทููุจ: 50
   โ  โโ ุงููุนูู: 48
   โ  โโ ุงููุฑู: -2
   โ  โโ ุชุนููู: "ุดุฎุตุงู ูู ูุญุถุฑุง"
   โโ ุงูุญุงูุฉ โ Arrived
   โโ ูุชู ุงูุชุญุฏูุซ ุงูุชููุงุฆู:
      โโ outdoor_queue: -48
      โโ ูุงุนุฉ_ุงูุงูุชุธุงุฑ.current: +48

6. ุงููุธุงู ุชููุงุฆูุงู
   โโ ุงูุญุงูุฉ โ Closed
```

### Workflow 2: ูุงุนุฉ ุงูุชุธุงุฑ โ ูุงุนุฉ ููุงุจูุงุช

```
1. ูุดุฑู_ุฏุงุฎูู
   โโ ููุดุฆ ุทูุจ ููู ูู ุงูุชุธุงุฑ_1 โ ููุงุจูุงุช_5
   โโ ูุญุฏุฏ ุงูุนุฏุฏ: 30
   โโ ูุฎุชุงุฑ ููุธู_ูุณุงุฑ
   โโ ุงูุญุงูุฉ: Pending

2. ููุธู_ุฏุงุฎูู (ูุณุคูู ููุงุจูุงุช_5)
   โโ ูุณุชูู ุงูุทูุจ
   โโ ููุงูู โ Accepted

3. ููุธู_ูุณุงุฑ
   โโ ูุณุชูู ุงูุทูุจ
   โโ "ุจุฏุฃุช ุงูุชูุตูู"
   โโ InTransit

4. ููุธู_ุฏุงุฎูู (ูุณุคูู ููุงุจูุงุช_5)
   โโ ูุตุงุฏู ุนูู ุงููุตูู
   โโ Arrived โ Closed
```

### Workflow 3: ุฅุนุงุฏุฉ ุชูุฒูุน (ููุงุจูุงุช โ ููุงุจูุงุช)

```
1. ูุดุฑู_ุฏุงุฎูู
   โโ ููุงุญุธ ููุงุจูุงุช_1 ููุชูุฆุฉ (40/40)
   โโ ููุงุจูุงุช_3 ูุงุฑุบุฉ (10/40)
   โโ ููุดุฆ ุทูุจ: ููู 15 ูู ููุงุจูุงุช_1 โ ููุงุจูุงุช_3
   โโ Pending

2. ููุธู_ุฏุงุฎูู (ูุณุคูู ููุงุจูุงุช_3)
   โโ ููุงูู โ Accepted

3. ููุธู_ูุณุงุฑ
   โโ ูููุฐ โ InTransit

4. ููุธู_ุฏุงุฎูู (ูุณุคูู ููุงุจูุงุช_3)
   โโ ูุตุงุฏู โ Arrived โ Closed
```

---

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### Collection: `users`
```javascript
{
  id: "ahmad123",
  pass: "hashed_password", // ูู ุงูุฅุตุฏุงุฑ ุงูุญุงูู: ูุต ุนุงุฏู
  fullName: "ุฃุญูุฏ ูุญูุฏ",
  role: "ูุดุฑู_ุฎุงุฑุฌู" | "ููุธู_ุฎุงุฑุฌู" | "ูุดุฑู_ุฏุงุฎูู" | "ููุธู_ุฏุงุฎูู" | "ููุธู_ูุณุงุฑ" | "ูุฏูุฑ_ุนุงู" | "ุนุงุฑุถ",
  assignedHallId: "hall_1" | null, // ููููุธู ุงูุฏุงุฎูู ููุท
  createdAt: timestamp
}
```

### Collection: `halls`
```javascript
{
  id: "hall_1",
  name: "ูุงุนุฉ 1",
  type: "ุงูุชุธุงุฑ" | "ููุงุจูุงุช", // ููุน ุซุงุจุช
  capacity: 100,
  current: 45,
  supervisorId: "ahmad123", // ุงููุณุคูู
  active: true,
  status: "OPEN" | "PAUSED"
}
```

### Collection: `transfer_requests`
```javascript
{
  id: "req_abc123",
  
  // ุงูุฅูุดุงุก
  createdBy: "user_id",
  createdByName: "ุงูุงุณู",
  createdAt: timestamp,
  
  // ุงููุตุฏุฑ
  fromType: "ุฎุงุฑุฌ_ุงููุจูู" | "ูุงุนุฉ_ุงูุชุธุงุฑ" | "ูุงุนุฉ_ููุงุจูุงุช",
  fromId: "hall_1" | null,
  fromName: "ูุงุนุฉ 1" | null,
  
  // ุงููุฏู
  toType: "ูุงุนุฉ_ุงูุชุธุงุฑ" | "ูุงุนุฉ_ููุงุจูุงุช",
  toId: "hall_2",
  toName: "ูุงุนุฉ 2",
  
  // ุงูุชูุงุตูู
  requestedCount: 50,
  notes: "ููุงุญุธุงุช ุงุฎุชูุงุฑูุฉ",
  
  // ุงูุญุงูุฉ (State Machine)
  status: "pending" | "accepted" | "rejected" | "in_transit" | "arrived" | "closed",
  
  // ููุธู ุงููุณุงุฑ
  assignedPathOrganizer: "user_id" | null,
  
  // ุงููุจูู/ุงูุฑูุถ
  acceptance: {
    acceptedBy: "user_id",
    acceptedByName: "ุงูุงุณู",
    acceptedAt: timestamp,
    comment: "ุชุนููู"
  } | null,
  
  rejection: {
    rejectedBy: "user_id",
    rejectedByName: "ุงูุงุณู",
    rejectedAt: timestamp,
    reason: "ุณุจุจ ุงูุฑูุถ (ุฅูุฒุงูู)"
  } | null,
  
  // ุงูุชูุตูู
  transitStartedAt: timestamp | null,
  transitStartedBy: "user_id" | null,
  
  // ุงููุตุงุฏูุฉ ุนูู ุงููุตูู
  confirmation: {
    actualCount: 48,
    difference: -2, // (actualCount - requestedCount)
    matchStatus: "ูุทุงุจู" | "ูุงูุต" | "ุฒูุงุฏุฉ",
    comment: "ุชุนููู ุฅูุฒุงูู ุนูุฏ ูุฌูุฏ ูุฑู",
    confirmedBy: "user_id",
    confirmedByName: "ุงูุงุณู",
    confirmedAt: timestamp
  } | null,
  
  // ุงูุฅุบูุงู
  closedAt: timestamp | null
}
```

### Collection: `audit_logs`
```javascript
{
  id: "log_xyz",
  
  // ุงููุณุชุฎุฏู
  userId: "user_id",
  userRole: "ูุดุฑู_ุฎุงุฑุฌู",
  userName: "ุงูุงุณู ุงููุงูู",
  
  // ุงูุนูููุฉ
  action: "CREATE_TRANSFER_REQUEST" | "ACCEPT_REQUEST" | "CONFIRM_ARRIVAL" | etc,
  details: "ูุตู ุชูุตููู",
  
  // ุงูููุงู ุงููุชุฃุซุฑ
  entityType: "transfer_request" | "hall" | "user" | null,
  entityId: "entity_id" | null,
  
  // ุงูููู
  before: { ... } | null, // ุงูููู ูุจู ุงูุชุนุฏูู
  after: { ... } | null,  // ุงูููู ุจุนุฏ ุงูุชุนุฏูู
  reason: "ุณุจุจ ุงูุชุบููุฑ" | null,
  
  // ุงูุชูููุช
  timestamp: serverTimestamp(),
  ipAddress: "192.168.1.1" | null
}
```

### Collection: `settings/global_config`
```javascript
{
  outdoor_queue: 125, // ุนุฏุฏ ุงูููุชุธุฑูู ุฎุงุฑุฌ ุงููุจูู
  served_count: 450   // ุงูุนุฏุฏ ุงูุฐู ุชูุช ุฎุฏูุชู
}
```

---

## ๐ ูุตูููุฉ ุงูุตูุงุญูุงุช ุงููุงููุฉ

| ุงูุตูุงุญูุฉ | ุฎุงุฑุฌู ูุดุฑู | ุฎุงุฑุฌู ุนุงุฏู | ุฏุงุฎูู ูุดุฑู | ุฏุงุฎูู ุนุงุฏู | ููุธู ูุณุงุฑ | ูุฏูุฑ | ุนุงุฑุถ |
|---------|------------|------------|-----------|-----------|-----------|------|------|
| ุฅุฏุงุฑุฉ outdoor_queue | โ | โ ุฅุฏุฎุงู ููุท | โ | โ | โ | โ | โ |
| ุนุฑุถ outdoor_queue | โ | โ | โ | โ | โ | โ | โ |
| ุฅูุดุงุก ุทูุจ (ุฎุงุฑุฌโุงูุชุธุงุฑ) | โ | โ | โ | โ | โ | โ | โ |
| ุฅูุดุงุก ุทูุจ (ุงูุชุธุงุฑโููุงุจูุงุช) | โ | โ | โ | โ | โ | โ | โ |
| ุฅูุดุงุก ุทูุจ (ููุงุจูุงุชโููุงุจูุงุช) | โ | โ | โ | โ | โ | โ | โ |
| ูุจูู/ุฑูุถ ุงูุทูุจ | โ | โ | โ ูู ุงูุทูุจุงุช | โ ูุงุนุชู ููุท | โ | โ | โ |
| ุจุฏุก ุงูุชูุตูู (InTransit) | โ | โ | โ | โ | โ | โ | โ |
| ุงููุตุงุฏูุฉ ุนูู ุงููุตูู | โ | โ | โ | โ ูุงุนุชู ููุท | โ | โ | โ |
| ุฅุฏุงุฑุฉ ุงููุงุนุงุช | โ | โ | โ | โ | โ | โ | โ |
| ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู | โ | โ | โ | โ | โ | โ | โ |
| ุนุฑุถ ุณุฌู ุงูุนูููุงุช | โ | โ | โ | โ | โ | โ | โ |
| ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช | โ ูุญุฏูุฏุฉ | โ | โ | โ ูุญุฏูุฏุฉ | โ | โ | โ |

---

## ๐ก๏ธ ููุงุนุฏ ุงูุฃูุงู

### 1. ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
```javascript
// ูู ูู ูุธููุฉ ุญุณุงุณุฉ
function hasPermission(permission) {
    if (!currentUser) return false;
    const rolePermissions = ROLE_PERMISSIONS[currentUser.role] || [];
    return rolePermissions.includes(permission);
}

// ูุซุงู ุงุณุชุฎุฏุงู
if (!hasPermission(PERMISSIONS.CREATE_OUTSIDE_TO_WAITING)) {
    showToast('ุบูุฑ ูุตุฑุญ', 'error');
    return;
}
```

### 2. ุงูุชุญูู ูู ููููุฉ ุงููุงุนุฉ
```javascript
// ููููุธู ุงูุฏุงุฎูู: ุงูุชุฃูุฏ ูู ุฃููุง ูุงุนุชู
if (currentUser.role === ROLES.INTERNAL_REGULAR && 
    currentUser.assignedHallId !== requestToId) {
    showToast('ูุง ููููู ุงููุตูู ููุฐู ุงููุงุนุฉ', 'error');
    return;
}
```

### 3. State Machine ููุทูุจุงุช
```javascript
// ุงูุงูุชูุงูุงุช ุงููุณููุญุฉ ููุท
const ALLOWED_TRANSITIONS = {
    'pending': ['accepted', 'rejected'],
    'accepted': ['in_transit'],
    'in_transit': ['arrived'],
    'arrived': ['closed']
};
```

### 4. Audit Trail ุฅูุฒุงูู
```javascript
// ูู ุนูููุฉ ูุฌุจ ุฃู ุชุณุฌู
await logActivity(
    'ACCEPT_REQUEST',
    'ูุจูู ุทูุจ ููู 50 ุดุฎุต',
    'transfer_request',
    requestId,
    { status: 'pending' },
    { status: 'accepted' }
);
```

### 5. ุงููุตุงุฏูุฉ ุฅูุฒุงููุฉ
```javascript
// ูุง ูููู ุฅุบูุงู ุงูุทูุจ ุจุฏูู ูุตุงุฏูุฉ
if (!req.confirmation) {
    showToast('ูุฌุจ ุงููุตุงุฏูุฉ ุฃููุงู', 'error');
    return;
}
```

---

## ๐ ุญุงูุงุช ุงูุทูุจ (State Machine)

```
pending (ููุฏ ุงูุงูุชุธุงุฑ)
  โ
  โโโ accepted (ุชู ุงููุจูู)
  โ     โ
  โ   in_transit (ุฌุงุฑู ุงูุชูุตูู)
  โ     โ
  โ   arrived (ูุตู)
  โ     โ
  โ   closed (ูุบูู)
  โ
  โโโ rejected (ูุฑููุถ) [ููุงูุฉ]
```

**ููุงุนุฏ:**
- โ ูุง ูููู ุงูุงูุชูุงู ูู `pending` ูุจุงุดุฑุฉ ูู `in_transit`
- โ ูุง ูููู `arrived` ุจุฏูู `accepted` ุฃููุงู
- โ ูุง ูููู ุงูุชุนุฏูู ุจุนุฏ `closed` (ุฅูุง Admin ุจุณุจุจ)

---

## ๐จ ุงููุงุฌูุงุช ุญุณุจ ุงูุฏูุฑ

### ูุดุฑู ุฎุงุฑุฌู
- Dashboard: ุฅุฏุงุฑุฉ outdoor_queue + ุฅูุดุงุก ุทูุจุงุช
- ุทูุจุงุชู: ุนุฑุถ ุงูุทูุจุงุช ุงูุชู ุฃูุดุฃูุง ููุท

### ููุธู ุฎุงุฑุฌู
- Dashboard: ุฒุฑ ูุงุญุฏ "ุฅุถุงูุฉ ูุงุตููู"

### ูุดุฑู ุฏุงุฎูู
- Dashboard: ูุธุฑุฉ ุดุงููุฉ + ุฅูุดุงุก ุทูุจุงุช
- ุงููุงุนุงุช: ุนุฑุถ ูู ุงููุงุนุงุช
- ุทูุจุงุช ุงูููู: ูู ุงูุทูุจุงุช

### ููุธู ุฏุงุฎูู
- ูุงุนุชู: ุชูุงุตูู ูุงุนุชู ููุท
- ุงูุทูุจุงุช: ุงููุงุฑุฏุฉ ููุงุนุชู ููุท

### ููุธู ูุณุงุฑ
- Dashboard: ุงูุทูุจุงุช ุงููุนููุฉ ูู
- ุฒุฑ "ุจุฏุฃุช ุงูุชูุตูู"

### ูุฏูุฑ ุนุงู
- ูู ุงูุตูุญุงุช
- ุฅุฏุงุฑุฉ ูุงููุฉ
- ุณุฌู ุงูุนูููุงุช

### ุนุงุฑุถ
- Dashboard ููุฅุญุตุงุฆูุงุช ููุท

---

## โ Acceptance Criteria (ูุนุงููุฑ ุงููุจูู)

### 1. ุงูุฃุฏูุงุฑ
- [ ] ูู ุฏูุฑ ูุฑู ููุท ูุง ููุณูุญ ูู
- [ ] ูุง ูููู ุงููุตูู ููุตูุญุงุช ุบูุฑ ุงููุตุฑุญ ุจูุง
- [ ] ุงููุงุฆูุฉ ุชุจูู ุฏููุงููููุงู ุญุณุจ ุงูุตูุงุญูุงุช

### 2. Workflow
- [ ] ูุง ูููู ูุจูู ุทูุจ ููุงุนุฉ ุบูุฑ ูุนููุฉ ูู
- [ ] ุงููุตุงุฏูุฉ ุฅูุฒุงููุฉ ุนูุฏ ูุฌูุฏ ูุฑู
- [ ] ุงูุชุนููู ุฅูุฒุงูู ุนูุฏ ุงูุฑูุถ
- [ ] ููุธู ุงููุณุงุฑ ูุฑู ุทูุจุงุชู ููุท

### 3. ุงูุชุฏูู ุงููุงูู
- [ ] ุฎุงุฑุฌ โ ุงูุชุธุงุฑ โ ููุงุจูุงุช ูุนูู ุจุณูุงุณุฉ
- [ ] ุฅุนุงุฏุฉ ุงูุชูุฒูุน ุชุญุชุงุฌ ููุงููุฉ
- [ ] ุงูุฃุนุฏุงุฏ ุชุชุญุฏุซ ุชููุงุฆูุงู ุนูุฏ ุงูุชุฃููุฏ

### 4. Audit Log
- [ ] ูู ุนูููุฉ ูุณุฌูุฉ
- [ ] before/after ููุฌูุฏุฉ
- [ ] ุงูุณุจุจ ููุฌูุฏ ุนูุฏ ุงูุฑูุถ/ุงูุชุนุฏูู

### 5. State Machine
- [ ] ูุง ุงูุชูุงูุงุช ุบูุฑ ููุทููุฉ
- [ ] ูุง ุชุนุฏูู ุจุนุฏ Closed ุฅูุง Admin

---

## ๐ Edge Cases (ุงูุญุงูุงุช ุงูุทุฑููุฉ)

### 1. ุงูุชุฒุงูู
**ุงููุดููุฉ:** ูุณุชุฎุฏูุงู ููุจูุงู ููุณ ุงูุทูุจ
**ุงูุญู:** Firestore Transactions + ุงูุชุญูู ูู ุงูุญุงูุฉ

### 2. ุงูุนุฏุฏ ุบูุฑ ูุงูู
**ุงููุดููุฉ:** outdoor_queue = 30ุ ุทูุจ ููู 50
**ุงูุญู:** ุงูุชุญูู ูุจู ุงูุฅูุดุงุก

### 3. ุงููุงุนุฉ ููุชูุฆุฉ
**ุงููุดููุฉ:** capacity = 40ุ current = 40ุ ุทูุจ +10
**ุงูุญู:** ุชุญุฐูุฑ ุนูุฏ ุงููุจูู

### 4. ููุธู ุงููุณุงุฑ ุบูุฑ ูุชุงุญ
**ุงููุดููุฉ:** ูุง ููุฌุฏ ููุธูู ูุณุงุฑ
**ุงูุญู:** ููุน ุฅูุดุงุก ุงูุทูุจ + ุฑุณุงูุฉ ูุงุถุญุฉ

### 5. ุงููุตุงุฏูุฉ ุจุฏูู ุชุนููู
**ุงููุดููุฉ:** ูุฑู = -5ุ ุชุนููู ูุงุฑุบ
**ุงูุญู:** validation ุฅูุฒุงูู

---

## ๐ ุฎุทุฉ ุงูุชูููุฐ (ุชู)

โ 1. Schema + Roles + Permissions
โ 2. Authentication + Role Check
โ 3. Dynamic Navigation
โ 4. Transfer Requests CRUD
โ 5. State Machine
โ 6. Confirmation System
โ 7. Audit Logging
โ 8. Dashboard per Role
โ 9. Analytics View
โ 10. Admin Management

---

## ๐ ุงูุชุซุจูุช ูุงูุงุณุชุฎุฏุงู

1. **ุฑูุน ุงูููู:** `index.html` ุนูู ุฃู hosting
2. **First Run:** ุงุถุบุท "ุชููุฆุฉ ุงููุธุงู" ูุฅูุดุงุก ุงูุจูุงูุงุช ุงูุฃูููุฉ
3. **Login:** 
   - Admin: `admin` / `1234`
   - ุฃูุดุฆ ูุณุชุฎุฏููู ุขุฎุฑูู ูู ููุญุฉ ุงููุฏูุฑ

---

## ๐ ุงูุฏุนู

ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ:
- ุนุจุฏุงูุฑุญูู ุงููุงููู
- ุนุจุฏุงูุนุฒูุฒ ุงูุฃุญูุฏู
- ุนุจุฏุงูุนุฒูุฒ ุงูุฐุจูุงูู

Made with โค๏ธ 2026
